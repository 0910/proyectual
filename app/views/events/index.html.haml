%section#events.grid.bg-darkest-gray
  .container-fluid
    - @years.each do |year|
      .row.no-gutter.year.row-async
        %p.year-number.hidden-xs
          #{year.name}
        .col-xs-12.col-sm-6.col-md-6.col-async-left
          %p.year-number.visible-xs
            #{year.name}
        .col-xs-12.col-sm-6.col-md-6.no-gutter.col-async-right
          - year.events.each do |event|
            .col-md-12.col-sm-12.grid-item
              - if event.images.empty?
                = link_to(event_path(event), class: 'grid-link') do
                  .grid-hover
                    .grid-hover-content
                      .lines
                        .line.top
                        .line.right
                        .line.bottom
                        .line.left
                      %p #{event.name}
                  .ph{:style => "background-image: image-url('image-not-available.jpg')"}
              - else
                - event.images.each do |image|
                  - if image.cover == true
                    = link_to(event_path(event), class: 'grid-link') do
                      .grid-hover
                        .grid-hover-content
                          .lines
                            .line.top
                            .line.right
                            .line.bottom
                            .line.left
                          %p #{event.name}
                      .ph{:style => "background-image: url(#{image.file.url(:medium)})"}